!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){var b=function(){function b(){var b=this,c=function(){var c=["br-wrapper"];""!==b.options.theme&&c.push("br-theme-"+b.options.theme),b.$elem.wrap(a("<div />",{"class":c.join(" ")}))},d=function(){b.$elem.unwrap()},e=function(c){return a.isNumeric(c)&&(c=Math.floor(c)),a('option[value="'+c+'"]',b.$elem)},f=function(){var c=b.options.initialRating;return c?e(c):a("option:selected",b.$elem)},g=function(){var c=b.$elem.find('option[value="'+b.options.emptyValue+'"]');return!c.length&&b.options.allowEmpty?(c=a("<option />",{value:b.options.emptyValue}),c.prependTo(b.$elem)):c},h=function(a){var c=b.$elem.data("barrating");return"undefined"!=typeof a?c[a]:c},i=function(a,c){null!==c&&"object"==typeof c?b.$elem.data("barrating",c):b.$elem.data("barrating")[a]=c},j=function(){var a=f(),c=g(),d=a.val(),e=a.data("html")?a.data("html"):a.text(),h=null!==b.options.allowEmpty?b.options.allowEmpty:!!c.length,j=c.length?c.val():null,k=c.length?c.text():null;i(null,{userOptions:b.options,ratingValue:d,ratingText:e,originalRatingValue:d,originalRatingText:e,allowEmpty:h,emptyRatingValue:j,emptyRatingText:k,readOnly:b.options.readonly,ratingMade:!1})},k=function(){b.$elem.removeData("barrating")},l=function(){return h("ratingText")},m=function(){return h("ratingValue")},n=function(){var c=a("<div />",{"class":"br-widget"});return b.$elem.find("option").each(function(){var d,e,f,g;d=a(this).val(),d!==h("emptyRatingValue")&&(e=a(this).text(),f=a(this).data("html"),f&&(e=f),g=a("<a />",{href:"#","data-rating-value":d,"data-rating-text":e,html:b.options.showValues?e:""}),c.append(g))}),b.options.showSelectedRating&&c.append(a("<div />",{text:"","class":"br-current-rating"})),b.options.reverse&&c.addClass("br-reverse"),b.options.readonly&&c.addClass("br-readonly"),c},o=function(){return h("userOptions").reverse?"nextAll":"prevAll"},p=function(a){e(a).prop("selected",!0),h("userOptions").triggerChange&&b.$elem.change()},q=function(){a("option",b.$elem).prop("selected",function(){return this.defaultSelected}),h("userOptions").triggerChange&&b.$elem.change()},r=function(a){a=a?a:l(),a==h("emptyRatingText")&&(a=""),b.options.showSelectedRating&&b.$elem.parent().find(".br-current-rating").text(a)},s=function(a){return Math.round(Math.floor(10*a)/10%1*100)},t=function(){b.$widget.find("a").removeClass(function(a,b){return(b.match(/(^|\s)br-\S+/g)||[]).join(" ")})},u=function(){var c,d,e=b.$widget.find('a[data-rating-value="'+m()+'"]'),f=h("userOptions").initialRating,g=a.isNumeric(m())?m():0,i=s(f);if(t(),e.addClass("br-selected br-current")[o()]().addClass("br-selected"),!h("ratingMade")&&a.isNumeric(f)){if(g>=f||!i)return;c=b.$widget.find("a"),d=e.length?e[h("userOptions").reverse?"prev":"next"]():c[h("userOptions").reverse?"last":"first"](),d.addClass("br-fractional"),d.addClass("br-fractional-"+i)}},v=function(a){return!(!h("allowEmpty")||!h("userOptions").deselectable)&&m()==a.attr("data-rating-value")},w=function(c){c.on("click.barrating",function(c){var d,e,f=a(this),g=h("userOptions");return c.preventDefault(),d=f.attr("data-rating-value"),e=f.attr("data-rating-text"),v(f)&&(d=h("emptyRatingValue"),e=h("emptyRatingText")),i("ratingValue",d),i("ratingText",e),i("ratingMade",!0),p(d),r(e),u(),g.onSelect.call(b,m(),l(),c),!1})},x=function(b){b.on("mouseenter.barrating",function(){var b=a(this);t(),b.addClass("br-active")[o()]().addClass("br-active"),r(b.attr("data-rating-text"))})},y=function(a){b.$widget.on("mouseleave.barrating blur.barrating",function(){r(),u()})},z=function(b){b.on("touchstart.barrating",function(b){b.preventDefault(),b.stopPropagation(),a(this).click()})},A=function(a){a.on("click.barrating",function(a){a.preventDefault()})},B=function(a){w(a),b.options.hoverState&&(x(a),y(a))},C=function(a){a.off(".barrating")},D=function(a){var c=b.$widget.find("a");h("userOptions").fastClicks&&z(c),a?(C(c),A(c)):B(c)};this.show=function(){h()||(c(),j(),b.$widget=n(),b.$widget.insertAfter(b.$elem),u(),r(),D(b.options.readonly),b.$elem.hide())},this.readonly=function(a){"boolean"==typeof a&&h("readOnly")!=a&&(D(a),i("readOnly",a),b.$widget.toggleClass("br-readonly"))},this.set=function(a){var c=h("userOptions");0!==b.$elem.find('option[value="'+a+'"]').length&&(i("ratingValue",a),i("ratingText",b.$elem.find('option[value="'+a+'"]').text()),i("ratingMade",!0),p(m()),r(l()),u(),c.silent||c.onSelect.call(this,m(),l()))},this.clear=function(){var a=h("userOptions");i("ratingValue",h("originalRatingValue")),i("ratingText",h("originalRatingText")),i("ratingMade",!1),q(),r(l()),u(),a.onClear.call(this,m(),l())},this.destroy=function(){var a=m(),c=l(),e=h("userOptions");C(b.$widget.find("a")),b.$widget.remove(),k(),d(),b.$elem.show(),e.onDestroy.call(this,a,c)}}return b.prototype.init=function(b,c){return this.$elem=a(c),this.options=a.extend({},a.fn.barrating.defaults,b),this.options},b}();a.fn.barrating=function(c,d){return this.each(function(){var e=new b;if(a(this).is("select")||a.error("Sorry, this plugin only works with select fields."),e.hasOwnProperty(c)){if(e.init(d,this),"show"===c)return e.show(d);if(e.$elem.data("barrating"))return e.$widget=a(this).next(".br-widget"),e[c](d)}else{if("object"==typeof c||!c)return d=c,e.init(d,this),e.show();a.error("Method "+c+" does not exist on jQuery.barrating")}})},a.fn.barrating.defaults={theme:"",initialRating:null,allowEmpty:null,emptyValue:"",showValues:!1,showSelectedRating:!0,deselectable:!0,reverse:!1,readonly:!1,fastClicks:!0,hoverState:!0,silent:!1,triggerChange:!0,onSelect:function(a,b,c){},onClear:function(a,b){},onDestroy:function(a,b){}},a.fn.barrating.BarRating=b});var MD5=function(a){function b(a,b){return a<<b|a>>>32-b}function c(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f}function d(a,b,c){return a&b|~a&c}function e(a,b,c){return a&c|b&~c}function f(a,b,c){return a^b^c}function g(a,b,c){return b^(a|~c)}function h(a,e,f,g,h,i,j){return a=c(a,c(c(d(e,f,g),h),j)),c(b(a,i),e)}function i(a,d,f,g,h,i,j){return a=c(a,c(c(e(d,f,g),h),j)),c(b(a,i),d)}function j(a,d,e,g,h,i,j){return a=c(a,c(c(f(d,e,g),h),j)),c(b(a,i),d)}function k(a,d,e,f,h,i,j){return a=c(a,c(c(g(d,e,f),h),j)),c(b(a,i),d)}function l(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=Array(f-1),h=0,i=0;i<c;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g}function m(a){var b,c,d="",e="";for(c=0;c<=3;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d}function n(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b}var o,p,q,r,s,t,u,v,w,x=Array(),y=7,z=12,A=17,B=22,C=5,D=9,E=14,F=20,G=4,H=11,I=16,J=23,K=6,L=10,M=15,N=21;for(a=n(a),x=l(a),t=1732584193,u=4023233417,v=2562383102,w=271733878,o=0;o<x.length;o+=16)p=t,q=u,r=v,s=w,t=h(t,u,v,w,x[o+0],y,3614090360),w=h(w,t,u,v,x[o+1],z,3905402710),v=h(v,w,t,u,x[o+2],A,606105819),u=h(u,v,w,t,x[o+3],B,3250441966),t=h(t,u,v,w,x[o+4],y,4118548399),w=h(w,t,u,v,x[o+5],z,1200080426),v=h(v,w,t,u,x[o+6],A,2821735955),u=h(u,v,w,t,x[o+7],B,4249261313),t=h(t,u,v,w,x[o+8],y,1770035416),w=h(w,t,u,v,x[o+9],z,2336552879),v=h(v,w,t,u,x[o+10],A,4294925233),u=h(u,v,w,t,x[o+11],B,2304563134),t=h(t,u,v,w,x[o+12],y,1804603682),w=h(w,t,u,v,x[o+13],z,4254626195),v=h(v,w,t,u,x[o+14],A,2792965006),u=h(u,v,w,t,x[o+15],B,1236535329),t=i(t,u,v,w,x[o+1],C,4129170786),w=i(w,t,u,v,x[o+6],D,3225465664),v=i(v,w,t,u,x[o+11],E,643717713),u=i(u,v,w,t,x[o+0],F,3921069994),t=i(t,u,v,w,x[o+5],C,3593408605),w=i(w,t,u,v,x[o+10],D,38016083),v=i(v,w,t,u,x[o+15],E,3634488961),u=i(u,v,w,t,x[o+4],F,3889429448),t=i(t,u,v,w,x[o+9],C,568446438),w=i(w,t,u,v,x[o+14],D,3275163606),v=i(v,w,t,u,x[o+3],E,4107603335),u=i(u,v,w,t,x[o+8],F,1163531501),t=i(t,u,v,w,x[o+13],C,2850285829),w=i(w,t,u,v,x[o+2],D,4243563512),v=i(v,w,t,u,x[o+7],E,1735328473),u=i(u,v,w,t,x[o+12],F,2368359562),t=j(t,u,v,w,x[o+5],G,4294588738),w=j(w,t,u,v,x[o+8],H,2272392833),v=j(v,w,t,u,x[o+11],I,1839030562),u=j(u,v,w,t,x[o+14],J,4259657740),t=j(t,u,v,w,x[o+1],G,2763975236),w=j(w,t,u,v,x[o+4],H,1272893353),v=j(v,w,t,u,x[o+7],I,4139469664),u=j(u,v,w,t,x[o+10],J,3200236656),t=j(t,u,v,w,x[o+13],G,681279174),w=j(w,t,u,v,x[o+0],H,3936430074),v=j(v,w,t,u,x[o+3],I,3572445317),u=j(u,v,w,t,x[o+6],J,76029189),t=j(t,u,v,w,x[o+9],G,3654602809),w=j(w,t,u,v,x[o+12],H,3873151461),v=j(v,w,t,u,x[o+15],I,530742520),u=j(u,v,w,t,x[o+2],J,3299628645),t=k(t,u,v,w,x[o+0],K,4096336452),w=k(w,t,u,v,x[o+7],L,1126891415),v=k(v,w,t,u,x[o+14],M,2878612391),u=k(u,v,w,t,x[o+5],N,4237533241),t=k(t,u,v,w,x[o+12],K,1700485571),w=k(w,t,u,v,x[o+3],L,2399980690),v=k(v,w,t,u,x[o+10],M,4293915773),u=k(u,v,w,t,x[o+1],N,2240044497),t=k(t,u,v,w,x[o+8],K,1873313359),w=k(w,t,u,v,x[o+15],L,4264355552),v=k(v,w,t,u,x[o+6],M,2734768916),u=k(u,v,w,t,x[o+13],N,1309151649),t=k(t,u,v,w,x[o+4],K,4149444226),w=k(w,t,u,v,x[o+11],L,3174756917),v=k(v,w,t,u,x[o+2],M,718787259),u=k(u,v,w,t,x[o+9],N,3951481745),t=c(t,p),u=c(u,q),v=c(v,r),w=c(w,s);var O=m(t)+m(u)+m(v)+m(w);return O.toLowerCase()};$(function(){function a(){"undefined"!=typeof ga&&ga(function(){var a=ga.getAll()[0],b=a.get("clientId");a.get("trackingId");$.ajax({url:d+"client/"+b+"/votes/"+MD5(window.location.href),type:"get",beforeSend:function(){},success:function(a){}})})}function b(){$.ajax({url:d+"votes/"+MD5(window.location.href),type:"get",beforeSend:function(){},success:function(a){if(null!=a.avg){$("<script>").attr("type","application/ld+json").text(JSON.stringify({"@context":"http://schema.org","@type":"Website",aggregateRating:{"@type":"AggregateRating",ratingValue:parseFloat(a.avg).toFixed(2),bestRating:"5",ratingCount:a.total}},null,4)).appendTo("head"),$("select").barrating("set",parseFloat(a.avg).toFixed(2));var b=100*a.avg/5;$(".title").text(parseFloat(a.avg).toFixed(2)+" ("+parseFloat(b).toFixed(2)+"%) "+a.total+" votes")}}})}function c(){$("#example-bootstrap").barrating({theme:"fontawesome-stars-o",showSelectedRating:!1,initialRating:3.78,onSelect:function(a,b){"undefined"!=typeof ga&&ga(function(){var b=ga.getAll()[0],c=b.get("clientId"),e=(b.get("trackingId"),{client_id:c,rating:a,url:window.location.href,salt:MD5(window.location.href)});$.ajax({dataType:"JSON",data:JSON.stringify(e),url:d+"votes",type:"post",processData:!1,headers:{"Content-Type":"application/json"},beforeSend:function(){},success:function(a){}})})},onClear:function(a,b){}})}var d="https://rating.nbhsystems.com/api/v1/";c(),b(),a()});